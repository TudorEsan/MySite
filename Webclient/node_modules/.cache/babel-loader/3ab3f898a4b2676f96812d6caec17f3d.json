{"ast":null,"code":"function useFormValidator() {\n  const fields = {};\n\n  const validate = e => {\n    const target = e.target || e;\n    const {\n      field,\n      validators,\n      errorClass\n    } = fields[target.name];\n\n    if (validators && validators.length) {\n      const isValid = validators.reduce((valid, current) => {\n        return valid && Boolean(current(target.value));\n      }, true);\n      fields[target.name].isValid = isValid;\n\n      if (isValid) {\n        field.classList.remove(errorClass);\n      } else {\n        field.classList.add(\"error\");\n      }\n\n      return isValid;\n    }\n\n    return true;\n  };\n\n  const registerFieldRef = (field, {\n    validators,\n    errorClass\n  }) => {\n    if (field) {\n      field.addEventListener('blur', function (e) {\n        return validate(e);\n      });\n      fields[field.name] = {\n        field,\n        validators,\n        errorClass\n      };\n    }\n  };\n\n  const register = options => {\n    return ref => ref && registerFieldRef(ref, options);\n  };\n\n  const isFormValid = () => {\n    let isValid = true;\n    Object.keys(fields).forEach(key => {\n      isValid = isValid && validate(fields[key].field);\n    });\n    return isValid;\n  };\n\n  return [register, isFormValid];\n}\n\nexport default useFormValidator;","map":{"version":3,"sources":["/Users/tudoresan/Desktop/MySite/Webclient/src/Data/MyHooks/useForm.js"],"names":["useFormValidator","fields","validate","e","target","field","validators","errorClass","name","length","isValid","reduce","valid","current","Boolean","value","classList","remove","add","registerFieldRef","addEventListener","register","options","ref","isFormValid","Object","keys","forEach","key"],"mappings":"AAAA,SAASA,gBAAT,GAA4B;AACxB,QAAMC,MAAM,GAAG,EAAf;;AACA,QAAMC,QAAQ,GAAIC,CAAD,IAAO;AACpB,UAAMC,MAAM,GAAGD,CAAC,CAACC,MAAF,IAAYD,CAA3B;AACA,UAAM;AAAEE,MAAAA,KAAF;AAASC,MAAAA,UAAT;AAAqBC,MAAAA;AAArB,QAAoCN,MAAM,CAACG,MAAM,CAACI,IAAR,CAAhD;;AACA,QAAIF,UAAU,IAAIA,UAAU,CAACG,MAA7B,EAAqC;AACjC,YAAMC,OAAO,GAAGJ,UAAU,CAACK,MAAX,CAAkB,CAACC,KAAD,EAAQC,OAAR,KAAoB;AAClD,eAAOD,KAAK,IAAIE,OAAO,CAACD,OAAO,CAACT,MAAM,CAACW,KAAR,CAAR,CAAvB;AACH,OAFe,EAEb,IAFa,CAAhB;AAGAd,MAAAA,MAAM,CAACG,MAAM,CAACI,IAAR,CAAN,CAAoBE,OAApB,GAA8BA,OAA9B;;AACA,UAAIA,OAAJ,EAAa;AACTL,QAAAA,KAAK,CAACW,SAAN,CAAgBC,MAAhB,CAAuBV,UAAvB;AACH,OAFD,MAEO;AACHF,QAAAA,KAAK,CAACW,SAAN,CAAgBE,GAAhB,CAAoB,OAApB;AACH;;AACD,aAAOR,OAAP;AACH;;AACD,WAAO,IAAP;AACH,GAhBD;;AAkBA,QAAMS,gBAAgB,GAAG,CAACd,KAAD,EAAQ;AAAEC,IAAAA,UAAF;AAAcC,IAAAA;AAAd,GAAR,KAAuC;AAC5D,QAAIF,KAAJ,EAAW;AACPA,MAAAA,KAAK,CAACe,gBAAN,CAAuB,MAAvB,EAA+B,UAAUjB,CAAV,EAAa;AACxC,eAAOD,QAAQ,CAACC,CAAD,CAAf;AACH,OAFD;AAGAF,MAAAA,MAAM,CAACI,KAAK,CAACG,IAAP,CAAN,GAAqB;AAAEH,QAAAA,KAAF;AAASC,QAAAA,UAAT;AAAqBC,QAAAA;AAArB,OAArB;AACH;AACJ,GAPD;;AASA,QAAMc,QAAQ,GAAIC,OAAD,IAAa;AAC1B,WAAQC,GAAD,IAASA,GAAG,IAAIJ,gBAAgB,CAACI,GAAD,EAAMD,OAAN,CAAvC;AACH,GAFD;;AAIA,QAAME,WAAW,GAAG,MAAM;AACtB,QAAId,OAAO,GAAG,IAAd;AACAe,IAAAA,MAAM,CAACC,IAAP,CAAYzB,MAAZ,EAAoB0B,OAApB,CAA4BC,GAAG,IAAI;AAC/BlB,MAAAA,OAAO,GAAGA,OAAO,IAAIR,QAAQ,CAACD,MAAM,CAAC2B,GAAD,CAAN,CAAYvB,KAAb,CAA7B;AACH,KAFD;AAIA,WAAOK,OAAP;AACH,GAPD;;AAQA,SAAO,CAACW,QAAD,EAAWG,WAAX,CAAP;AACH;;AAGD,eAAexB,gBAAf","sourcesContent":["function useFormValidator() {\n    const fields = {};\n    const validate = (e) => {\n        const target = e.target || e;\n        const { field, validators, errorClass } = fields[target.name];\n        if (validators && validators.length) {\n            const isValid = validators.reduce((valid, current) => {\n                return valid && Boolean(current(target.value));\n            }, true);\n            fields[target.name].isValid = isValid;\n            if (isValid) {\n                field.classList.remove(errorClass);\n            } else {\n                field.classList.add(\"error\");\n            }\n            return isValid;\n        }\n        return true;\n    };\n\n    const registerFieldRef = (field, { validators, errorClass }) => {\n        if (field) {\n            field.addEventListener('blur', function (e) {\n                return validate(e);\n            });\n            fields[field.name] = { field, validators, errorClass };\n        }\n    };\n\n    const register = (options) => {\n        return (ref) => ref && registerFieldRef(ref, options);\n    };\n\n    const isFormValid = () => {\n        let isValid = true;\n        Object.keys(fields).forEach(key => { \n            isValid = isValid && validate(fields[key].field);\n        });\n\n        return isValid;\n    }\n    return [register, isFormValid]\n}\n\n\nexport default useFormValidator;"]},"metadata":{},"sourceType":"module"}